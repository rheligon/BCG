{% extends "matcher/base.html" %}
{% load humanize %}
{% load staticfiles %}

{% block title %}Intraday (Detalle de Transacciones){% endblock %}

{%block head%}
<!-- No hace falta cargar dataTables.css original si se incluye el de bootstrap -->
<link rel="stylesheet" href="{% static 'css/dataTables/dataTables.bootstrap.css' %}">
<link rel="stylesheet" href="{% static 'css/jquery-form-validation/jquery.validation.css' %}">
<link rel="stylesheet" href="{% static 'css/sweet-alert.css' %}">
<link rel="stylesheet" href="{% static 'css/procesando.css' %}">
<link rel="stylesheet" href="{% static 'css/picker.css' %}">
<link rel="stylesheet" href="{% static 'css/picker.date.css' %}">
{%endblock%}

{% block content %}
<style> form {padding-bottom: 1%;} #table-div-conta, #table-div-corr {padding-top: 1%;}</style>

<legend><h1>Intraday (Detalle de Transacciones)</h1></legend>

<form class="form-inline">
  <fieldset>
    <div class="row clearfix">
      <!-- Select Basic -->
      <div class="form-group col-md-12 ">
        <label class="control-label"> </label>
        <h4>Cuenta: <strong>{{cuenta.codigo}}</strong></h4><h4> Transacciones Desde <strong>{{fecha}}</strong> Hasta : <strong>{{fechaActual}}</strong></h4>
      </div> 
  </fieldset>
</form>

<form class="form-inline">
  <fieldset>
<div ="row" id="tablaArchive">
  <div style="padding-bottom:1%;" class="col-md-3 pull-right">
  </div>
</div>
  <div class="tab-pane active" id="conta-tab">
    <div id="table-div-conta" class="table-responsive col-md-12">
      <table id="table-pa" class="table table-bordered table-striped tabla">
        <thead>
          <tr>
            <th>MT</th>
            <th>Débitos</th>
            <th>Créditos</th>
            <th>Fecha Entrada</th>
            <th>Fecha Valor</th>
            
          </tr>
        </thead>
        <tbody id="tb-conta">
          {% for mensaje in mensajes %}
            {{mensaje.mensaje_intraday.tipo}}
            {% if mensaje.mensaje_intraday.tipo == "103" %}

              <tr>
                <td><a id='"mostrar_info{{mensaje.mensaje_intraday.idmensaje}}"' tipo="mensaje.mensaje_intraday.tipo" refremitente="{{mensaje.ref_remitente}}"data-toggle="modal" href="#myModal">{{mensaje.mensaje_intraday.tipo}}</a></td>
                <td>{{mensaje.monto}}</td>
                <td></td>
                <td>{{mensaje.mensaje_intraday.fecha_entrada}}</td>
                <td>{{mensaje.fecha_valor}}</td>
              </tr>
            {% elif mensaje.mensaje_intraday.tipo == "202"%}
              <tr>
                <td><a data-toggle="modal" data-target="#myModal">{{mensaje.mensaje_intraday.tipo}}</a></td>
                <td>{{mensaje.monto}}</td>
                <td></td>
                <td>{{mensaje.mensaje_intraday.fecha_entrada}}</td>
                <td>{{mensaje.fecha_valor}}</td>
              </tr>
            {% endif %}
          {% endfor %}    
            
        </tbody>
      </table>
    </div>
  </div>
  </fieldset>
</form>

<!-- Static Modal para procesando -->
<div class="modal modal-static fade" id="processing-modal" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <div class="text-center">
                    <img src="{% static 'images/procesando.gif' %}" class="icon" />
                    <h4>Procesando, por favor espere.</h4>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div id="cuerpo" class="modal-body">
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block script%}
<script> 
    //define el idioma de la tabla (es/en)
    idioma_tr = "es"
</script>

<script src="{% static 'js/jquery.dataTables.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/dataTables.bootstrap.js' %}" type="text/javascript"></script>
<script src="{% static 'js/jquery-form-validation/jquery.validation.min.js' %}"></script>
<script src="{% static 'js/sweet-alert.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/picker.js' %}"></script>
<script type="text/javascript" src="{% static 'js/picker.date.js' %}"></script>
<script type="text/javascript" src="{% static 'js/pickerlegacy.js' %}"></script>
<script src="{% static 'js/transIntraday.js' %}" type="text/javascript"></script>
{% endblock %}