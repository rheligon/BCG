{% extends "matcher/base.html" %}
{% load staticfiles %}


{% block head %}
<link rel="stylesheet" href="{% static 'css/dataTables/dataTables.bootstrap.css' %}">
<link rel="stylesheet" href="{% static 'css/sweet-alert.css' %}">
<link rel="stylesheet" href="{% static 'css/dual_list.css' %}">
{% endblock%}

{% block content %}
<style type="text/css">
#detalleusuarioForm {
    margin-top: 15px;
}
</style>

<div class="table-responsive col-md-8">
    <table id="table-perfiles" class="table table-bordered table-striped tabla">
        <thead>
            <tr>
                <th>Nombre</th>
            </tr>
        </thead>
        <tbody>
            {% for perfil in perfiles %}
                <tr id= "tr-{{perfil.pk}}">
                    <td id= "td-{{perfil.pk}}">
                      <a name="{{perfil.nombre}}" type="Perfil">{{perfil.nombre}}</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    <hr/><br/>
</div>

<div class="col-md-3">
    <button type="button" id="addButton" data-loading-text="Cargando..." class="col-md-5 btn btn-success" autocomplete="off" data-toggle="modal" data-target="#add-banco-modal">
        Agregar
    </button>
</div>
<div style="padding-top:1%;" class="col-md-3">
    <button type="button" id="delButton" data-loading-text="Cargando..." class="col-md-5 btn btn-danger" autocomplete="off">
        Eliminar
    </button>
</div>
<div style="padding-top:1%;" class="col-md-3">
    <button type="button" id="updButton" data-loading-text="Cargando..." class="col-md-5 btn btn-primary" autocomplete="off">
        Modificar
    </button>
</div>

<input id="Id_perfil" name="Id_perfil" value="-1" type="text" hidden>

<input type="file" id="fiad">
<img src="" width="200" style="display:none;" />

<div class="row">
  <div class="col-md-6">
    <legend>Detalles:</legend>
  </div>
  <div class="col-md-2 col-md-push-1" hidden>
      <button type="button" name="Aceptar" id="acptButton" data-loading-text="Cargando..." class="col-md-7 btn btn-info" autocomplete="off">
          Aceptar
      </button>
  </div>
  <div class="col-md-2" hidden>
      <button type="button" name="Cancelar" id="cancelButton" data-loading-text="Cargando..." class="col-md-7 btn btn-default" autocomplete="off">
          Cancelar
      </button>
  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <label class="col-md-1 control-label">Nombre:</label>
    <div class="col-md-3">
        <input type="text" class="form-control" id="perf-nom" value="" name="nomperf" />
    </div>
  </div>
</div>

<div class="row" style="padding-top:2%;">

    <div class="dual-list list-left col-md-4">
        <div class="well text-right">
            <div class="row">
                <div class="col-md-12" style="text-align:center;">
                        <h4>Funciones Disponibles</h4>
                </div>
                <div class="col-md-9">
                    <div class="input-group">
                        <span class="input-group-addon glyphicon glyphicon-search"></span>
                        <input type="text" name="SearchDualList" class="form-control" placeholder="search" />
                    </div>
                </div>
                <div class="col-md-3 pull-right">
                    <div class="btn-group">
                        <a class="btn btn-default selector" title="select all"><i class="glyphicon glyphicon-unchecked"></i></a>
                    </div>
                </div>
            </div>
            <ul class="list-group" type="campos">
                {% for campo in campos_disp %}
                <li class="list-group-item" pos="{{forloop.counter0}}">{{campo}}</li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <div class="list-arrows col-md-1 text-center">

        <button class="btn btn-default btn-sm move-right">
            <span class="glyphicon glyphicon-chevron-right"></span>
        </button>

        <button class="btn btn-default btn-sm move-left">
            <span class="glyphicon glyphicon-chevron-left"></span>
        </button>
    </div>

    <div class="dual-list list-right col-md-4">
        <div class="well text-right">
            <div class="row">
                <div class="col-md-12" style="text-align:center;">
                     <h4>Funciones Asignadas</h4>
                </div>

                <div class="col-md-3 pull-right">
                    <div class="btn-group">
                        <a class="btn btn-default selector" title="select all"><i class="glyphicon glyphicon-unchecked"></i></a>
                    </div>
                </div>
            </div>
            <ul class="list-group" type="campos">
                {% for campo in campos_elegidos %}
                    <li class="list-group-item">{{campo}}</li>
                {% endfor %}
            </ul>
        </div>
    </div>

</div>

<ul id="cuentas_disp" hidden>
    {% for cuenta in cuentas %}
        <li class="list-group-item" id="cta-{{cuenta.idcuenta}}">{{cuenta.codigo}}</li>
    {% endfor %}
</ul>

<!-- Static Modal para procesando -->
<div class="modal modal-static fade" id="processing-modal" role="dialog" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-body">
                <div class="text-center">
                    <img src="{% static 'images/procesando.gif' %}" class="icon" />
                    <h4>Procesando, por favor espere.</h4>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}

<script> 
//define el idioma de la tabla (es/en)
idioma_tr = "es"
</script>
<script src="{% static 'js/jquery.dataTables.min.js' %}" type="text/javascript"></script>
<script src="{% static 'js/dataTables.bootstrap.js' %}" type="text/javascript"></script>
<script type="text/javascript" src="{% static 'js/sweet-alert.min.js' %}"></script>
<script type="text/javascript" src="{% static 'js/seg_Perfiles.js' %}"></script>
<script type="text/javascript"> 
$(function(){

$('#fiad').change( function(event) {
    var tmppath = URL.createObjectURL(event.target.files[0]);
    $("img").fadeIn("fast").attr('src',tmppath);

});
});  
</script>
{% endblock %}